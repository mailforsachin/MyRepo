echo "165.136.18.145 53
165.136.18.145 88
165.136.18.145 749
165.136.25.146 53
165.136.25.146 88
165.136.25.146 749
165.136.25.216 53
165.136.25.216 88
165.136.25.216 749
165.136.25.217 53
165.136.25.217 88
165.136.25.217 749
165.136.25.174 53
165.136.25.174 88
165.136.25.174 749
165.136.25.175 53
165.136.25.175 88
165.136.25.175 749
155.16.81.220 53
155.16.81.220 88
155.16.81.220 749
155.16.81.221 53
155.16.81.221 88
155.16.81.221 749" | (
  TCP_TIMEOUT=3
  while read host port; do
    (CURPID=$BASHPID;
    (sleep $TCP_TIMEOUT;kill $CURPID) &
    exec 3<> /dev/tcp/$host/$port
    ) 2>/dev/null
    case $? in
    0)
      echo $host $port is open;;
    1)
      echo $host $port is closed;;
    143) # killed by SIGTERM
       echo $host $port timeouted;;
     esac
  done
  ) 2>/dev/null
